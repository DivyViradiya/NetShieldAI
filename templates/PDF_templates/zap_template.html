<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NetshieldAI Security Report</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/PDF_style/zap_stylesheet.css', _external=True) }}"></head>
<body>
    <header id="page-header">
        <img src="{{ url_for('static', filename='images/netshield_logo.png', _external=True) }}" alt="NetshieldAI Logo" class="logo">
        <h1>NetshieldAI Web Security Report</h1>
    </header>
    
    <footer id="page-footer">
        <p>Confidential Report for {{ data.target_url }} | Generated by NetshieldAI | <span class="page-num"></span></p>
    </footer>

    <main>
        <section class="overview">
            <h2>Scan Overview</h2>
            <div class="overview-details">
                <p><strong>Target URL:</strong> <span>{{ data.target_url }}</span></p>
                <p><strong>Scan Date:</strong> <span>{{ data.scan_date }}</span></p>
            </div>
        </section>

        <section class="summary">
            <h2>Executive Summary</h2>
            <div class="summary-grid">
                <div class="summary-card risk-high">
                    <span class="count">{{ data.summary.High }}</span>
                    <span class="label">High Risk</span>
                </div>
                <div class="summary-card risk-medium">
                    <span class="count">{{ data.summary.Medium }}</span>
                    <span class="label">Medium Risk</span>
                </div>
                <div class="summary-card risk-low">
                    <span class="count">{{ data.summary.Low }}</span>
                    <span class="label">Low Risk</span>
                </div>
                <div class="summary-card risk-info">
                    <span class="count">{{ data.summary.Informational }}</span>
                    <span class="label">Informational</span>
                </div>
            </div>
        </section>

        <hr class="section-break">

        <section class="findings">
            <h2>Detailed Findings ({{ data.summary.Total }} Total)</h2>
            
            {% for finding in data.findings %}
            <div class="finding-card page-break">
                <div class="finding-header risk-{{ finding.risk | lower }}" 
                     style="--risk-score: {{ finding.predicted_risk_score if (finding.predicted_risk_score is number) else 0 }};">
                    
                    <div class="finding-title">
                        <span class="risk-label">{{ finding.risk }}</span>
                        <h3>{{ finding.name }}</h3>
                    </div>
                    
                    <div class="finding-score">
                        <span>Predicted Risk</span>
                        <strong>{{ finding.predicted_risk_score }}</strong>
                    </div>
                </div>

                <div class="finding-body">
                    <p><strong>URL Found:</strong> <code>{{ finding.url }}</code></p>
                    
                    <h4>Description</h4>
                    <p>{{ finding.description | safe }}</p>
                    
                    <h4>Solution</h4>
                    <p>{{ finding.solution | safe }}</p>
                    
                    <h4>Reference</h4>
                    <p>{{ finding.reference | safe }}</p>
                </div>
            </div>
            {% endfor %}
            
            {% if data.findings | length == 0 %}
                <p class="no-findings">No vulnerabilities were found for this target.</p>
            {% endif %}

        </section>
    </main>
</body>
</html>